frr defaults datacenter
hostname {{ hostname }}
username cumulus nopassword
!
ip forwarding
!
service integrated-vtysh-config
!
log syslog informational
!
{% if bgpd == 'yes' %}
router bgp {{ my_asn }}
 {% for neighbors in bgp_neighbors %}
 neighbor {{ neighbors.neighbor }} remote-as {{ neighbors.asn }}
 {% endfor %}
!
 {% if bgp_nlri != 'no'  %}
 address-family ipv4 unicast
  {% for nlris in bgp_nlri %}
  network {{ nlris.nlri }}
  {% endfor %}
 exit-address-family
 {% endif %}
{% endif %}
!
{% if ospfd == 'yes' %}
router ospf
 ospf router-id {{ rid }}
 log-adjacency-changes detail
 auto-cost reference-bandwidth 10000
 {% for networks in ospf %}
 network {{ networks.network }} area {{ networks.area }}
 {% endfor %}
{% endif %}
line vty
!
