# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant.configure(2) do |config|

### Service Provider 1

  config.vm.define "SP1-BR1" do |sp1br1|
  config.vm.box = "CumulusCommunity/cumulus-vx"
  config.vm.box_version = "3.7.6"
  config.vm.base_mac = "DEADBEAF0001"
    sp1br1.vm.network "private_network", ip: "172.16.0.1", adapter: 2, netmask: "255.255.255.0", virtualbox__intnet: "sw1"
    sp1br1.vm.network "private_network", ip: "100.0.0.1", adapter: 3, netmask: "255.255.255.252", virtualbox__intnet: "dc1br1-sp1br1"
    sp1br1.vm.hostname = "SP1BR1"
    sp1br1.vm.provider :virtualbox do |vb|
      vb.name = "SP1-BR1"
      vb.memory = 256
    end
  end

  config.vm.define "SP1-BR2" do |sp1br2|
  config.vm.box = "CumulusCommunity/cumulus-vx"
  config.vm.box_version = "3.7.6"
  config.vm.base_mac = "DEADBEAF0002"
    sp1br2.vm.network "private_network", ip: "172.16.0.2", adapter: 2, netmask: "255.255.255.0", virtualbox__intnet: "sw1"
    sp1br2.vm.network "private_network", ip: "100.0.0.13", adapter: 3, netmask: "255.255.255.252", virtualbox__intnet: "dc2br2-sp1br2"
    sp1br2.vm.hostname = "SP1BR2"
    sp1br2.vm.provider :virtualbox do |vb|
      vb.name = "SP1-BR2"
      vb.memory = 256
    end
  end

### Service Provider 2

  config.vm.define "SP2-BR1" do |sp2br1|
  config.vm.box = "CumulusCommunity/cumulus-vx"
  config.vm.box_version = "3.7.6"
  config.vm.base_mac = "DEADBEAF0003"
    sp2br1.vm.network "private_network", ip: "172.16.0.3", adapter: 2, netmask: "255.255.255.0", virtualbox__intnet: "sw1"
    sp2br1.vm.network "private_network", ip: "100.0.0.5", adapter: 3, netmask: "255.255.255.252", virtualbox__intnet: "dc1br2-sp2br1"
    sp2br1.vm.hostname = "SP2BR1"
    sp2br1.vm.provider :virtualbox do |vb|
      vb.name = "SP2-BR1"
      vb.memory = 256
    end
  end

  config.vm.define "SP2-BR2" do |sp2br2|
  config.vm.box = "CumulusCommunity/cumulus-vx"
  config.vm.box_version = "3.7.6"
  config.vm.base_mac = "DEADBEAF0004"
    sp2br2.vm.network "private_network", ip: "172.16.0.4", adapter: 2, netmask: "255.255.255.0", virtualbox__intnet: "sw1"
    sp2br2.vm.network "private_network", ip: "100.0.0.9", adapter: 3, netmask: "255.255.255.252", virtualbox__intnet: "dc1br1-sp2br2"
    sp2br2.vm.hostname = "SP2BR2"
    sp2br2.vm.provider :virtualbox do |vb|
      vb.name = "SP2-BR2"
      vb.memory = 256
    end
  end

### Data Center 1

###### Border routers

  config.vm.define "dc1br1" do |dc1br1|
  config.vm.box = "CumulusCommunity/cumulus-vx"
  config.vm.box_version = "3.7.6"
  config.vm.base_mac = "DEADBEAF0005"
    dc1br1.vm.network "private_network", ip: "100.0.0.2", adapter: 2, netmask: "255.255.255.252", virtualbox__intnet: "dc1br1-sp1br1"
    dc1br1.vm.network "private_network", ip: "10.1.0.1", adapter: 3, netmask: "255.255.255.0", virtualbox__intnet: "sw2"
    dc1br1.vm.hostname = "dc1br1"
    dc1br1.vm.provider :virtualbox do |vb|
      vb.name = "dc1br1"
      vb.memory = 256
    end
  config.vm.provision "ansible" do |ansible|
#    ansible.inventory_path = "provisioning/hosts"
    ansible.playbook = "provisioning/routing.yml"
    ansible.become = "true"
  end

  end

  config.vm.define "DC1-BR2" do |dc1br2|
  config.vm.box = "CumulusCommunity/cumulus-vx"
  config.vm.box_version = "3.7.6"
  config.vm.base_mac = "DEADBEAF0006"
    dc1br2.vm.network "private_network", ip: "100.0.0.6", adapter: 2, netmask: "255.255.255.252", virtualbox__intnet: "dc1br2-sp2br1"
    dc1br2.vm.network "private_network", ip: "10.1.0.2", adapter: 3, netmask: "255.255.255.0", virtualbox__intnet: "sw2"
    dc1br2.vm.hostname = "DC1BR2"
    dc1br2.vm.provider :virtualbox do |vb|
      vb.name = "DC1-BR2"
      vb.memory = 256
    end
  end

###### Backbone routers

  config.vm.define "DC1-BB1" do |dc1bb1|
  config.vm.box = "CumulusCommunity/cumulus-vx"
  config.vm.box_version = "3.7.6"
  config.vm.base_mac = "DEADBEAF0007"
    dc1bb1.vm.network "private_network", ip: "10.1.0.4", adapter: 2, netmask: "255.255.255.0", virtualbox__intnet: "sw2"
    dc1bb1.vm.network "private_network", ip: "10.12.0.5", adapter: 3, netmask: "255.255.255.252", virtualbox__intnet: "dc1bb1-dc2bb1"
    dc1bb1.vm.network "private_network", ip: "10.12.0.9", adapter: 4, netmask: "255.255.255.252", virtualbox__intnet: "dc1bb1-dc1bb2"
    dc1bb1.vm.hostname = "DC1BB1"
    dc1bb1.vm.provider :virtualbox do |vb|
      vb.name = "DC1-BB1"
      vb.memory = 256
    end
  end

  config.vm.define "DC1-BB2" do |dc1bb2|
  config.vm.box = "CumulusCommunity/cumulus-vx"
  config.vm.box_version = "3.7.6"
  config.vm.base_mac = "DEADBEAF0008"
    dc1bb2.vm.network "private_network", ip: "10.1.0.3", adapter: 2, netmask: "255.255.255.0", virtualbox__intnet: "sw2"
    dc1bb2.vm.network "private_network", ip: "10.12.0.1", adapter: 3, netmask: "255.255.255.252", virtualbox__intnet: "dc1bb2-dc2bb2"
    dc1bb2.vm.network "private_network", ip: "10.12.0.10", adapter: 4, netmask: "255.255.255.252", virtualbox__intnet: "dc1bb1-dc1bb2"
    dc1bb2.vm.hostname = "DC1BB2"
    dc1bb2.vm.provider :virtualbox do |vb|
      vb.name = "DC1-BB2"
      vb.memory = 256
    end
  end

###### Infrastructure routers

  config.vm.define "DC1-IR1" do |dc1ir1|
  config.vm.box = "centos/7"
  config.vm.box_version = "1905.1"
  config.vm.base_mac = "DEADBEAF0009"
    dc1ir1.vm.network "private_network", ip: "10.1.0.6", adapter: 2, netmask: "255.255.255.0", virtualbox__intnet: "sw2"
    dc1ir1.vm.hostname = "DC1-IR1"
    dc1ir1.vm.provider :virtualbox do |vb|
      vb.name = "DC1-IR1"
	  vb.memory = 256
    end
  end

  config.vm.define "DC1-IR2" do |dc1ir2|
  config.vm.box = "centos/7"
  config.vm.box_version = "1905.1"
  config.vm.base_mac = "DEADBEAF000A"
    dc1ir2.vm.network "private_network", ip: "10.1.0.5", adapter: 2, netmask: "255.255.255.0", virtualbox__intnet: "sw2"
    dc1ir2.vm.hostname = "DC1-IR2"
    dc1ir2.vm.provider :virtualbox do |vb|
      vb.name = "DC1-IR2"
	  vb.memory = 256
    end
  end

###### Infrastructure servers


### Data Center 2

###### Border routers

  config.vm.define "DC2-BR1" do |dc2br1|
  config.vm.box = "CumulusCommunity/cumulus-vx"
  config.vm.box_version = "3.7.6"
  config.vm.base_mac = "DEADBEAF000B"
    dc2br1.vm.network "private_network", ip: "100.0.0.14", adapter: 2, netmask: "255.255.255.252", virtualbox__intnet: "dc2br1-sp1br2"
    dc2br1.vm.network "private_network", ip: "10.2.0.1", adapter: 3, netmask: "255.255.255.0", virtualbox__intnet: "sw3"
    dc2br1.vm.hostname = "DC2BR1"
    dc2br1.vm.provider :virtualbox do |vb|
      vb.name = "DC2-BR1"
      vb.memory = 256
    end
  end

  config.vm.define "DC2-BR2" do |dc2br2|
  config.vm.box = "CumulusCommunity/cumulus-vx"
  config.vm.box_version = "3.7.6"
  config.vm.base_mac = "DEADBEAF000C"
    dc2br2.vm.network "private_network", ip: "100.0.0.10", adapter: 2, netmask: "255.255.255.252", virtualbox__intnet: "dc2br2-sp2br2"
    dc2br2.vm.network "private_network", ip: "10.2.0.2", adapter: 3, netmask: "255.255.255.0", virtualbox__intnet: "sw3"
    dc2br2.vm.hostname = "DC2BR2"
    dc2br2.vm.provider :virtualbox do |vb|
      vb.name = "DC2-BR2"
      vb.memory = 256
    end
  end

###### Backbone routers

  config.vm.define "DC2-BB1" do |dc2bb1|
  config.vm.box = "CumulusCommunity/cumulus-vx"
  config.vm.box_version = "3.7.6"
  config.vm.base_mac = "DEADBEAF000D"
    dc2bb1.vm.network "private_network", ip: "10.2.0.4", adapter: 2, netmask: "255.255.255.0", virtualbox__intnet: "sw3"
    dc2bb1.vm.network "private_network", ip: "10.12.0.6", adapter: 3, netmask: "255.255.255.252", virtualbox__intnet: "dc1bb1-dc2bb1"
    dc2bb1.vm.network "private_network", ip: "10.12.0.13", adapter: 4, netmask: "255.255.255.252", virtualbox__intnet: "dc2bb1-dc2bb2"
    dc2bb1.vm.hostname = "DC2BB1"
    dc2bb1.vm.provider :virtualbox do |vb|
      vb.name = "DC2-BB1"
      vb.memory = 256
    end
  end

  config.vm.define "DC2-BB2" do |dc2bb2|
  config.vm.box = "CumulusCommunity/cumulus-vx"
  config.vm.box_version = "3.7.6"
  config.vm.base_mac = "DEADBEAF000E"
    dc2bb2.vm.network "private_network", ip: "10.2.0.3", adapter: 2, netmask: "255.255.255.0", virtualbox__intnet: "sw3"
    dc2bb2.vm.network "private_network", ip: "10.12.0.2", adapter: 3, netmask: "255.255.255.252", virtualbox__intnet: "dc1bb2-dc2bb2"
    dc2bb2.vm.network "private_network", ip: "10.12.0.14", adapter: 4, netmask: "255.255.255.252", virtualbox__intnet: "dc2bb1-dc2bb2"
    dc2bb2.vm.hostname = "DC2BB2"
    dc2bb2.vm.provider :virtualbox do |vb|
      vb.name = "DC2-BB2"
      vb.memory = 256
    end
  end

###### Infrastructure routers

  config.vm.define "DC2-IR1" do |dc2ir1|
  config.vm.box = "centos/7"
  config.vm.box_version = "1905.1"
  config.vm.base_mac = "DEADBEAF000F"
    dc2ir1.vm.network "private_network", ip: "10.2.0.6", adapter: 2, netmask: "255.255.255.0", virtualbox__intnet: "sw3"
    dc2ir1.vm.hostname = "DC2-IR1"
    dc2ir1.vm.provider :virtualbox do |vb|
      vb.name = "DC2-IR1"
	  vb.memory = 256
    end
  end

  config.vm.define "DC2-IR2" do |dc2ir2|
  config.vm.box = "centos/7"
  config.vm.box_version = "1905.1"
  config.vm.base_mac = "DEADBEAF0010"
    dc2ir2.vm.network "private_network", ip: "10.2.0.5", adapter: 2, netmask: "255.255.255.0", virtualbox__intnet: "sw3"
    dc2ir2.vm.hostname = "DC2-IR2"
    dc2ir2.vm.provider :virtualbox do |vb|
      vb.name = "DC2-IR2"
	  vb.memory = 256
    end
  end

###### Infrastructure servers


### Management

#  config.vm.define "MASTER" do |master|
#  config.vm.box = "centos/7"
#  config.vm.base_mac = "DEADBEAFAAAA"
#    master.vm.hostname = "MASTER"
#    master.vm.provider :virtualbox do |vb|
#      vb.name = "MASTER"
#      vb.memory = 512
#    end
# 
#  config.vm.provision "ansible" do |ansible|
#    ansible.playbook = "provisioning/master.yml"
#    ansible.become = "true"
#  end
#
#  end

end
